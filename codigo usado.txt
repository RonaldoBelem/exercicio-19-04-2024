
CREATE DATABASE VendasSeguras;


USE VendasSeguras;


CREATE TABLE Clientes (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    Nome VARCHAR(100),
    Email VARCHAR(100) UNIQUE,
    Senha VARCHAR(255),
    UltimoLogin TIMESTAMP,
    DataCadastro TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);


CREATE TABLE Produtos (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    Nome VARCHAR(100),
    Preco DECIMAL(10, 2),
    Estoque INT,
    DataCadastro TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    DataAtualizacao TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);


CREATE TABLE FaturamentoDiario (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    Data DATE UNIQUE,
    ValorTotal DECIMAL(10, 2),
    CONSTRAINT chk_valor_total CHECK (ValorTotal >= 0)
);


CREATE TABLE Auditoria (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    UsuarioID INT,
    Acao VARCHAR(100),
    DataHora TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (UsuarioID) REFERENCES Clientes(ID)
);
